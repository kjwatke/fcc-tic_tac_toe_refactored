var App=function(){function t(){this.tiles=[],this.tilesDisabled=[],this.ctx=[],this.gameOver=!1,this.content=[],this.turnCount=0,this.map=[0,0,0,0,0,0,0,0,0]}return t.prototype.init=function(){var t=this;this.cacheTiles(),this.cacheCtx(),this.manualReset();for(var e=0;e<this.tiles.length;e+=1)this.content[e]="";var i=document.querySelector(".one-player-or-two"),o=document.querySelector(".one");o.addEventListener("click",function(){t.numOfPlayers=1,i.classList.add("hide-overlay"),setTimeout(function(){i.classList.add("remove-overlay"),i.classList.remove("hide-overlay")},650)});var s=document.querySelector(".two");s.addEventListener("click",function(){t.numOfPlayers=2,i.classList.add("hide-overlay"),setTimeout(function(){i.classList.add("remove-overlay"),i.classList.remove("hide-overlay")},650)});var n=document.querySelector(".choose-symbol"),a=document.querySelector(".x");a.addEventListener("click",function(){t.playerChoice="x",n.classList.add("hide-overlay"),setTimeout(function(){n.classList.add("remove-overlay")},650)});var h=document.querySelector(".o");h.addEventListener("click",function(){t.playerChoice="o",n.classList.add("hide-overlay"),setTimeout(function(){n.classList.add("remove-overlay")},650)})},t.prototype.draw=function(t){if(this.turnCount++,!(this.turnCount>9||this.gameOver)){var e=this.tiles[t];if(!this.tilesDisabled[t]){if(this.tilesDisabled[t]=!0,e.classList.add("fade-out-tile"),this.tiles[t].style="transform: rotateY(180deg); transition: transform 500ms ease-in","x"===this.playerChoice?this.drawX(t):"o"===this.playerChoice&&this.drawO(t),this.checkWin(),!(this.turnCount<9)||this.gameOver)return;this.computerTurn()}}},t.prototype.drawX=function(t){var e=this;this.content[t]="x",this.tilesDisabled[t]=!0;var i="x"===this.playerChoice?300:1200;setTimeout(function(){e.ctx[t].lineCap="round",e.ctx[t].lineWidth=5,e.ctx[t].beginPath(),e.ctx[t].moveTo(20,20),e.ctx[t].lineTo(80,80),e.ctx[t].moveTo(80,20),e.ctx[t].lineTo(20,80),e.ctx[t].stroke(),e.ctx[t].closePath()},i),this.checkWin()},t.prototype.drawO=function(t){var e=this,i="x"===this.playerChoice?1e3:0,o="x"===this.playerChoice?1200:300;this.turnCount++,this.tilesDisabled[t]=!0,this.content[t]="o",setTimeout(function(){e.tiles[t].classList.add("fade-out-tile"),e.tiles[t].style="transform: rotateY(180deg); transition: transform 500ms ease-out"},i),setTimeout(function(){e.ctx[t].beginPath(),e.ctx[t].lineWidth=5,e.ctx[t].arc(50,50,34,0,2*Math.PI,!1),e.ctx[t].stroke(),e.ctx[t].closePath()},o),this.checkWin()},t.prototype.cacheTiles=function(){for(var t=0;t<9;t+=1)this.tiles[t]=document.querySelector(".canvas"+t),this.tilesDisabled[t]=!1},t.prototype.handleComputerAnimation=function(t,e){var i=this;setTimeout(function(){i.tiles[t].classList.add("fade-out-tile"),i.tiles[t].style="transform: rotateY(180deg); transition: transform 500ms ease-out"},e)},t.prototype.cacheCtx=function(){for(var t=0;t<9;t+=1)this.ctx[t]=this.tiles[t].getContext("2d")},t.prototype.computerTurn=function(){var t=Math.floor(9*Math.random());0!==t||this.tilesDisabled[0]?1!==t||this.tilesDisabled[1]?2!==t||this.tilesDisabled[2]?3!==t||this.tilesDisabled[3]?4!==t||this.tilesDisabled[4]?5!==t||this.tilesDisabled[5]?6!==t||this.tilesDisabled[6]?7!==t||this.tilesDisabled[7]?8!==t||this.tilesDisabled[8]?this.computerTurn():"x"===this.playerChoice?this.drawO(8):(this.handleComputerAnimation(8,1e3),this.drawX(8)):"x"===this.playerChoice?this.drawO(7):(this.handleComputerAnimation(7,1e3),this.drawX(7)):"x"===this.playerChoice?this.drawO(6):(this.handleComputerAnimation(6,1e3),this.drawX(6)):"x"===this.playerChoice?this.drawO(5):(this.handleComputerAnimation(5,1e3),this.drawX(5)):"x"===this.playerChoice?this.drawO(4):(this.handleComputerAnimation(4,1e3),this.drawX(4)):"x"===this.playerChoice?this.drawO(3):(this.handleComputerAnimation(3,1e3),this.drawX(3)):"x"===this.playerChoice?this.drawO(2):(this.handleComputerAnimation(2,1e3),this.drawX(2)):"x"===this.playerChoice?this.drawO(1):(this.handleComputerAnimation(1,1e3),this.drawX(1)):"x"===this.playerChoice?this.drawO(0):(this.handleComputerAnimation(0,1e3),this.drawX(0))},t.prototype.checkWin=function(){return"x"===this.content[0]&&"x"===this.content[1]&&"x"===this.content[2]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[3]&&"x"===this.content[4]&&"x"===this.content[5]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[6]&&"x"===this.content[7]&&"x"===this.content[8]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[0]&&"x"===this.content[3]&&"x"===this.content[6]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[1]&&"x"===this.content[4]&&"x"===this.content[7]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[2]&&"x"===this.content[5]&&"x"===this.content[8]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[0]&&"x"===this.content[4]&&"x"===this.content[8]?(this.gameOver=!0,void this.handleGameover("x")):"x"===this.content[2]&&"x"===this.content[4]&&"x"===this.content[6]?(this.gameOver=!0,void this.handleGameover("x")):"o"===this.content[0]&&"o"===this.content[1]&&"o"===this.content[2]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[3]&&"o"===this.content[4]&&"o"===this.content[5]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[6]&&"o"===this.content[7]&&"o"===this.content[8]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[0]&&"o"===this.content[3]&&"o"===this.content[6]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[1]&&"o"===this.content[4]&&"o"===this.content[7]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[2]&&"o"===this.content[5]&&"o"===this.content[8]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[0]&&"o"===this.content[4]&&"o"===this.content[8]?(this.gameOver=!0,void this.handleGameover("o")):"o"===this.content[2]&&"o"===this.content[4]&&"o"===this.content[6]?(this.gameOver=!0,void this.handleGameover("o")):9!==this.turnCount||this.gameOver?void 0:(this.handleGameover("tie"),void(this.gameOver=!0))},t.prototype.handleGameover=function(t){var e=this;console.log("game over...",this.content),"tie"!==t?setTimeout(function(){console.log("game over! "+t+" won")},700):setTimeout(function(){console.log("game over! Tie game")},700),setTimeout(function(){e.clearBoard()},1500)},t.prototype.hover=function(t){this.tilesDisabled[t]?this.tilesDisabled[t]&&(this.tiles[t].style="\n        background: #f00;\n        transition: background 400ms ease-in;\n      "):this.tiles[t].style="\n        background: #90ee90;\n        transition: background 400ms ease-in\n      "},t.prototype.removeHover=function(t){this.tilesDisabled[t]?this.tilesDisabled[t]&&(this.tiles[t].style="\n        background: #87ceeb;\n        transition: background 300ms ease-out;\n      "):this.tiles[t].style="\n        background: #87ceeb;\n        transition: background 300ms ease-out;\n      "},t.prototype.clearBoard=function(){for(var t=this,e=0;e<9;e+=1)this.content[e]="";this.tilesDisabled.forEach(function(e,i){t.tilesDisabled[i]=!1}),this.ctx.forEach(function(t,e){t.clearRect(0,0,100,100)}),this.tiles.forEach(function(t){t.classList.remove("fade-out-tile")}),this.gameOver=!1,this.turnCount=0},t.prototype.manualReset=function(){var t=this,e=document.querySelector(".reload");e.addEventListener("click",function(){var e=prompt("Are you sure you want to clear games ?This will clear the board and the scoreEnter y to continue, anything else to abort");"y"===e.toLowerCase()&&t.clearBoard()})},t}(),appInstance=new App;appInstance.init();